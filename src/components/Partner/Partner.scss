.partner {
  text-align: center;
  padding-bottom: 100px;
  max-width: 1200px;
  margin: 0 auto;
  overflow: hidden;

  &__title {
    font-family: var(--font-display);
    font-weight: 600;
    font-size: clamp(18px, 4vw, 64px);
    letter-spacing: 4px;
    padding: 8px 24px;
    border: 2px solid #000;
    color: #000;
    border-radius: 50px;
    display: inline-block;
    margin-bottom: 80px;
  }

  /* ===== Desktop/Tablet: static rows ===== */
  &__grid--static {
    display: flex;
    flex-direction: column;
    gap: 60px;
    align-items: center;
    width: 100%;
  }

  &__row {
    display: flex;
    width: 100%;
    justify-content: center;
    gap: 40px;
    flex-wrap: wrap;
  }

  &__item {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 1 160px;

    img {
      display: block;
      max-width: 100%;
      object-fit: contain;
      max-height: 140px;
      vertical-align: middle;
    }
  }

  /* Top row larger + first wider */
  &__row--top .partner__item img { max-height: 200px; }
  &__item--wide { flex: 0 1 350px; }

  /* Bottom row normal */
  &__row--bottom .partner__item img { max-height: 140px; }

  /* ===== Mobile: TWO marquee rows ===== */
  &__slider {
    display: none;
    width: 100%;
    overflow: hidden;
    gap: 18px;
  }

  /* marquee viewport */
  &__marquee {
    position: relative;
    width: 100%;
    overflow: hidden;
    // force GPU on iOS for smoother animation
    transform: translate3d(0,0,0);
    -webkit-transform: translate3d(0,0,0);
    will-change: transform;

    &:not(:last-child) { margin-bottom: 14px; }
  }

  /* inner track that moves */
  &__track {
    display: inline-flex;
    white-space: nowrap;
    gap: 28px;
    // do NOT use width:max-content (can be glitchy on iOS)
    backface-visibility: hidden;
    transform: translate3d(0,0,0);
  }

  /* items inside marquee */
  &__item--slide {
    flex: 0 0 auto;
    width: 180px;        /* nice large boxes on mobile */
    img { max-height: 140px; }
  }

  /* Directions & timing (smooth, not rushed) */
  &__marquee--left  .partner__track { animation: partner-marquee-left 18s linear infinite; }
  &__marquee--right .partner__track { animation: partner-marquee-right 20s linear infinite; }

  /* Make it even smoother on very small screens */
  @media (max-width: 480px) {
    &__item--slide { width: 160px; img { max-height: 120px; } }
    &__marquee--left  .partner__track { animation-duration: 22s; }
    &__marquee--right .partner__track { animation-duration: 24s; }
  }

  /* ===== Keyframes: translate by 50% (because we duplicated content) ===== */
  @keyframes partner-marquee-left {
    0%   { transform: translate3d(0, 0, 0); }
    100% { transform: translate3d(-50%, 0, 0); }
  }
  @keyframes partner-marquee-right {
    0%   { transform: translate3d(-50%, 0, 0); } /* start mid to reverse the direction */
    100% { transform: translate3d(0, 0, 0); }
  }

  /* ===== Responsive switches ===== */
  @media (max-width: 992px) {
    &__row--top .partner__item img { max-height: 160px; }
    &__row--bottom .partner__item img { max-height: 120px; }
    &__item--wide { flex: 0 1 240px; }
  }

  @media (max-width: 768px) {
    &__grid--static { display: none; }
    &__slider      { display: grid; }
  }

  /* If you want to respect “Reduce Motion”, enable this again.
     Note: it will stop auto play for users who turned it on in iOS Settings. */
  // @media (prefers-reduced-motion: reduce) {
  //   &__marquee--left  .partner__track,
  //   &__marquee--right .partner__track { animation: none; }
  // }
}
